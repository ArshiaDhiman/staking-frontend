{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport { STAKING_ADDRESS } from \"src/constants\";\nimport ABI from \"src/abi/Staking.json\";\nimport { getContract } from \"src/utils\"; // Define a type for the slice state\n\n// Define the initial state using that type\nconst initialState = {\n  pools: []\n};\nexport const stakingSlice = createSlice({\n  name: \"staking\",\n  // `createSlice` will infer the state type from the `initialState` argument\n  initialState,\n  reducers: {\n    setPools: (state, action) => {\n      state.pools = action.payload;\n    }\n  }\n});\nexport const updatePools = account => {\n  const staking = getContract(STAKING_ADDRESS, ABI);\n  return dispatch => {\n    staking.getPools().then(async _pools => {\n      // eslint-disable-next-line\n      const pools = _pools.map(({\n        poolName,\n        rewardRate,\n        lockPeriod,\n        totalStaked\n      }, id) => ({\n        name: poolName,\n        rewardRate: rewardRate.toString(),\n        lockPeriod: lockPeriod.toString(),\n        totalStaked: totalStaked.toString(),\n        id: id\n      }));\n    });\n  };\n}; // setPools is an action\n\nexport const {\n  setPools\n} = stakingSlice.actions;\nexport default stakingSlice.reducer;","map":{"version":3,"sources":["C:/Users/Arshia Dhiman/Solidity-Staking-Project/staking-frontend/src/features/staking.ts/stakingSlice.ts"],"names":["createSlice","STAKING_ADDRESS","ABI","getContract","initialState","pools","stakingSlice","name","reducers","setPools","state","action","payload","updatePools","account","staking","dispatch","getPools","then","_pools","map","poolName","rewardRate","lockPeriod","totalStaked","id","toString","actions","reducer"],"mappings":"AAAA,SACIA,WADJ,QAKO,kBALP;AASA,SAASC,eAAT,QAAgC,eAAhC;AACA,OAAOC,GAAP,MAAgB,sBAAhB;AACA,SAASC,WAAT,QAA4B,WAA5B,C,CAEA;;AAKA;AACA,MAAMC,YAA0B,GAAG;AAC/BC,EAAAA,KAAK,EAAE;AADwB,CAAnC;AAIA,OAAO,MAAMC,YAAY,GAAGN,WAAW,CAAC;AACpCO,EAAAA,IAAI,EAAE,SAD8B;AAEpC;AACAH,EAAAA,YAHoC;AAIpCI,EAAAA,QAAQ,EAAE;AACNC,IAAAA,QAAQ,EAAE,CAACC,KAAD,EAAQC,MAAR,KAA0C;AAChDD,MAAAA,KAAK,CAACL,KAAN,GAAcM,MAAM,CAACC,OAArB;AACH;AAHK;AAJ0B,CAAD,CAAhC;AAWP,OAAO,MAAMC,WAAW,GAAIC,OAAD,IAAsB;AAC7C,QAAMC,OAAO,GAAGZ,WAAW,CAACF,eAAD,EAAkBC,GAAlB,CAA3B;AAEA,SAAQc,QAAD,IAAsD;AACzDD,IAAAA,OAAO,CAACE,QAAR,GAAmBC,IAAnB,CAAwB,MAAOC,MAAP,IAAkB;AACtC;AACA,YAAMd,KAAK,GAAIc,MAAD,CAAkBC,GAAlB,CACV,CAAC;AAAEC,QAAAA,QAAF;AAAYC,QAAAA,UAAZ;AAAwBC,QAAAA,UAAxB;AAAoCC,QAAAA;AAApC,OAAD,EAAoDC,EAApD,MAA4D;AACxDlB,QAAAA,IAAI,EAAEc,QADkD;AAExDC,QAAAA,UAAU,EAAEA,UAAU,CAACI,QAAX,EAF4C;AAGxDH,QAAAA,UAAU,EAAEA,UAAU,CAACG,QAAX,EAH4C;AAIxDF,QAAAA,WAAW,EAAEA,WAAW,CAACE,QAAZ,EAJ2C;AAKxDD,QAAAA,EAAE,EAAEA;AALoD,OAA5D,CADU,CAAd;AASH,KAXD;AAYH,GAbD;AAcH,CAjBM,C,CAmBP;;AAEA,OAAO,MAAM;AAAEhB,EAAAA;AAAF,IAAeH,YAAY,CAACqB,OAAlC;AAEP,eAAerB,YAAY,CAACsB,OAA5B","sourcesContent":["import {\n    createSlice,\n    PayloadAction,\n    ThunkDispatch,\n    Action,\n} from \"@reduxjs/toolkit\";\nimport { RootState } from \"@src/store\";\nimport { Pool } from \"@ts/interfaces\";\n\nimport { STAKING_ADDRESS } from \"src/constants\";\nimport ABI from \"src/abi/Staking.json\";\nimport { getContract } from \"src/utils\";\n\n// Define a type for the slice state\ninterface StakingState {\n    pools: Pool[];\n}\n\n// Define the initial state using that type\nconst initialState: StakingState = {\n    pools: [],\n};\n\nexport const stakingSlice = createSlice({\n    name: \"staking\",\n    // `createSlice` will infer the state type from the `initialState` argument\n    initialState,\n    reducers: {\n        setPools: (state, action: PayloadAction<Pool[]>) => {\n            state.pools = action.payload;\n        },\n    },\n});\n\nexport const updatePools = (account?: string) => {\n    const staking = getContract(STAKING_ADDRESS, ABI);\n\n    return (dispatch: ThunkDispatch<RootState, void, Action>) => {\n        staking.getPools().then(async (_pools) => {\n            // eslint-disable-next-line\n            const pools = (_pools as any[]).map(\n                ({ poolName, rewardRate, lockPeriod, totalStaked }, id) => ({\n                    name: poolName,\n                    rewardRate: rewardRate.toString(),\n                    lockPeriod: lockPeriod.toString(),\n                    totalStaked: totalStaked.toString(),\n                    id: id,\n                }),\n            );\n        });\n    };\n};\n\n// setPools is an action\n\nexport const { setPools } = stakingSlice.actions;\n\nexport default stakingSlice.reducer;\n"]},"metadata":{},"sourceType":"module"}