{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/Arshia Dhiman/Solidity-Staking-Project/staking-frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/Arshia Dhiman/Solidity-Staking-Project/staking-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { createSlice } from \"@reduxjs/toolkit\";\nimport { STAKING_ADDRESS } from \"src/constants\";\nimport ABI from \"src/abi/Staking.json\";\nimport { getContract } from \"src/utils\"; // Define a type for the slice state\n\n// Define the initial state using that type\nvar initialState = {\n  pools: []\n};\nexport var stakingSlice = createSlice({\n  name: \"staking\",\n  // `createSlice` will infer the state type from the `initialState` argument\n  initialState: initialState,\n  reducers: {\n    setPools: function setPools(state, action) {\n      state.pools = action.payload;\n    }\n  }\n});\nexport var updatePools = function updatePools(account) {\n  var staking = getContract(STAKING_ADDRESS, ABI);\n  return function (dispatch) {\n    staking.getPools().then( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_pools) {\n        var pools;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                pools = _pools.map(function (_ref2, id) {\n                  var poolName = _ref2.poolName,\n                      rewardRate = _ref2.rewardRate,\n                      lockPeriod = _ref2.lockPeriod,\n                      totalStaked = _ref2.totalStaked;\n                  return {\n                    name: poolName,\n                    rewardRate: rewardRate.toString(),\n                    lockPeriod: lockPeriod.toString(),\n                    totalStaked: totalStaked.toString(),\n                    id: id\n                  };\n                });\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n  };\n}; // setPools is an action\n\nvar setPools = stakingSlice.actions.setPools;\nexport { setPools };\nexport default stakingSlice.reducer;","map":{"version":3,"sources":["C:/Users/Arshia Dhiman/Solidity-Staking-Project/staking-frontend/src/features/staking.ts/stakingSlice.ts"],"names":["createSlice","STAKING_ADDRESS","ABI","getContract","initialState","pools","stakingSlice","name","reducers","setPools","state","action","payload","updatePools","account","staking","dispatch","getPools","then","_pools","map","id","poolName","rewardRate","lockPeriod","totalStaked","toString","actions","reducer"],"mappings":";;AAAA,SACIA,WADJ,QAKO,kBALP;AASA,SAASC,eAAT,QAAgC,eAAhC;AACA,OAAOC,GAAP,MAAgB,sBAAhB;AACA,SAASC,WAAT,QAA4B,WAA5B,C,CAEA;;AAKA;AACA,IAAMC,YAA0B,GAAG;AAC/BC,EAAAA,KAAK,EAAE;AADwB,CAAnC;AAIA,OAAO,IAAMC,YAAY,GAAGN,WAAW,CAAC;AACpCO,EAAAA,IAAI,EAAE,SAD8B;AAEpC;AACAH,EAAAA,YAAY,EAAZA,YAHoC;AAIpCI,EAAAA,QAAQ,EAAE;AACNC,IAAAA,QAAQ,EAAE,kBAACC,KAAD,EAAQC,MAAR,EAA0C;AAChDD,MAAAA,KAAK,CAACL,KAAN,GAAcM,MAAM,CAACC,OAArB;AACH;AAHK;AAJ0B,CAAD,CAAhC;AAWP,OAAO,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,OAAD,EAAsB;AAC7C,MAAMC,OAAO,GAAGZ,WAAW,CAACF,eAAD,EAAkBC,GAAlB,CAA3B;AAEA,SAAO,UAACc,QAAD,EAAsD;AACzDD,IAAAA,OAAO,CAACE,QAAR,GAAmBC,IAAnB;AAAA,0EAAwB,iBAAOC,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACdd,gBAAAA,KADc,GACNc,MAAM,CAACC,GAAP,CACV,iBAAoDC,EAApD;AAAA,sBAAGC,QAAH,SAAGA,QAAH;AAAA,sBAAaC,UAAb,SAAaA,UAAb;AAAA,sBAAyBC,UAAzB,SAAyBA,UAAzB;AAAA,sBAAqCC,WAArC,SAAqCA,WAArC;AAAA,yBAA4D;AACxDlB,oBAAAA,IAAI,EAAEe,QADkD;AAExDC,oBAAAA,UAAU,EAAEA,UAAU,CAACG,QAAX,EAF4C;AAGxDF,oBAAAA,UAAU,EAAEA,UAAU,CAACE,QAAX,EAH4C;AAIxDD,oBAAAA,WAAW,EAAEA,WAAW,CAACC,QAAZ,EAJ2C;AAKxDL,oBAAAA,EAAE,EAAEA;AALoD,mBAA5D;AAAA,iBADU,CADM;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAxB;;AAAA;AAAA;AAAA;AAAA;AAWH,GAZD;AAaH,CAhBM,C,CAkBP;;IAEeZ,Q,GAAaH,YAAY,CAACqB,O,CAA1BlB,Q;;AAEf,eAAeH,YAAY,CAACsB,OAA5B","sourcesContent":["import {\n    createSlice,\n    PayloadAction,\n    ThunkDispatch,\n    Action,\n} from \"@reduxjs/toolkit\";\nimport { RootState } from \"@src/store\";\nimport { Pool } from \"@ts/interfaces\";\n\nimport { STAKING_ADDRESS } from \"src/constants\";\nimport ABI from \"src/abi/Staking.json\";\nimport { getContract } from \"src/utils\";\n\n// Define a type for the slice state\ninterface StakingState {\n    pools: Pool[];\n}\n\n// Define the initial state using that type\nconst initialState: StakingState = {\n    pools: [],\n};\n\nexport const stakingSlice = createSlice({\n    name: \"staking\",\n    // `createSlice` will infer the state type from the `initialState` argument\n    initialState,\n    reducers: {\n        setPools: (state, action: PayloadAction<Pool[]>) => {\n            state.pools = action.payload;\n        },\n    },\n});\n\nexport const updatePools = (account?: string) => {\n    const staking = getContract(STAKING_ADDRESS, ABI);\n\n    return (dispatch: ThunkDispatch<RootState, void, Action>) => {\n        staking.getPools().then(async (_pools) => {\n            const pools = _pools.map(\n                ({ poolName, rewardRate, lockPeriod, totalStaked }, id) => ({\n                    name: poolName,\n                    rewardRate: rewardRate.toString(),\n                    lockPeriod: lockPeriod.toString(),\n                    totalStaked: totalStaked.toString(),\n                    id: id,\n                }),\n            );\n        });\n    };\n};\n\n// setPools is an action\n\nexport const { setPools } = stakingSlice.actions;\n\nexport default stakingSlice.reducer;\n"]},"metadata":{},"sourceType":"module"}